/*!
 * fullpage.js Drag And Move Extension 0.0.1
 * https://github.com/alvarotrigo/fullPage.js
 *
 * This code has been bought from www.alvarotrigo.com/fullPage/extensions/ and it is not free to use or distrubute.
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
!function(n){window.fp_dragAndMoveExtension=function(){function o(){b.isAnimating&&(r(),e(),h()),window.requestAnimFrame(o)}function t(){"fingersonly"!==S.dragAndMove&&n(window).on("mousedown MouseDownHandler",f)}function e(){return en?(ln||(ln=Y),I=ln<Y?"up":ln>Y?"down":"none",ln=Y):(un||(un=z),I=un<z?"left":un>z?"right":"none",un=z),I}function r(){a(),l();var n=en?U:W;!b.isGrabbing&&n<0&&A.scrollHandler(),en?(_*=N,U+=_):(J*=N,W+=J),b.isGrabbing||tn||i(n)}function i(n){var o=en?U:W;Math.round(100*o)==Math.round(100*n)&&Q++,Q>2&&(b.isAnimating=!1)}function a(){var n,o;en?(n=A.getDestinationPosition(X),o=U):X.length&&(n=X.position().left,o=W);var t=X.length?n*-1-o:0,e=t*K;s(e)}function s(n){en?_+=n:J+=n}function l(){if(b.isGrabbing){var n,o;en?(n=Z-U,o=n-_):(n=$-W,o=n-J),s(o)}}function u(o){n(window).off("mousemove MouseMoveHandler",g),n(window).off("mouseup",u);var t=en?n(window).height():n(window).width(),e=I===V;if((rn<30||rn<t/2&&!e)&&(X=en?n(H):n(H).find(q)),!en&&X&&b.isGrabbing){var r=L.find(E);r.length&&A.landscapeScroll(r,X,V)}if(b.isGrabbing=!1,tn=!1,ln=0,un=0,!j)if(en){var i={up:n(H).prev().length?X.next():n(H),down:n(H).next().length?X.prev():n(H)};"none"!==V&&i[V].find(F).length&&A.silentLandscapeScroll(i[V].find(q),"internal")}else A.silentScroll(A.getDestinationPosition(n(H)))}function c(o){var t=o.originalEvent;if(Q=0,tn=!0,O=(new Date).getTime(),A.isReallyTouch(t)){var e=A.getEventsPage(t);an=e.y,sn=e.x,nn=b.getCurrentScroll(),on=b.getCurrentScrollSlides(t);var r=A.getMSPointer();n(window).on("touchmove "+r.move,g),n(window).on("touchend",u)}}function f(o){j=Q,Q=0,tn=!0,O=(new Date).getTime(),an=d(o,"y"),sn=d(o,"x"),nn=b.getCurrentScroll(),on=b.getCurrentScrollSlides(o),g(o),n(window).on("mousemove MouseMoveHandler",g),n(window).on("mouseup",u)}function d(n,o){var t="x"===o;if(A.isTouch&&A.isReallyTouch(n)){var e=A.getEventsPage(n);return t?e.x:e.y}return t?n.pageX:S.scrollBar||!S.autoScrolling?n.screenY:n.pageY}function g(o){var t,e,r=o.originalEvent;e=d(r,"x"),t=d(r,"y");var i=t-an,a=e-sn;if(!(Math.abs(i)<5&&Math.abs(a)<5||Math.abs(i)<5&&Math.abs(i)>Math.abs(a)||Math.abs(a)<5&&Math.abs(a)>Math.abs(i))){tn&&(b.isGrabbing||(en=Math.abs(i)>Math.abs(a),A.removeAnimation(n(y)),A.removeAnimation(L.find(R))),b.isGrabbing=!0);var s={up:n(H).prev(),down:n(H).next(),left:n(r.target).closest(G).find(q).prev(),right:n(r.target).closest(G).find(q).next(),none:n(H)};b.isGrabbing&&(U=b.getCurrentScroll(),W=b.getCurrentScrollSlides(r),z=e,Y=t,V=w(e,t),X=s[V],X=v(X,V),b.isAnimating=!0,n("#log").html(V)),Z=nn+i,$=on+a,r.preventDefault()}}function w(n,o){var t=en?an:sn,e=en?o:n;return rn=Math.abs(t-e),t>e?en?"down":"right":t<e?en?"up":"left":"none"}function v(o,t){return o.length?o:en?n(H):L.find(q)}function h(){var o=en?n(y):L.find(R);if(S.css3&&(!en||en&&S.autoScrolling&&!S.scrollBar)){var t=en?"translate3d(0px, "+Math.round(U)+"px, 0px)":"translate3d("+Math.round(W)+"px, 0px, 0px)";o.css(A.getTransforms(t))}else S.autoScrolling&&!S.scrollBar?o.css("top",Math.round(U)):en?n(window).scrollTop(Math.round(-U)):o.closest(E).scrollLeft(-1*Math.round(W))}function p(){var o=["continuousHorizontal","continuousVertical"];n.each(o,function(n,o){S[o]&&(S[o]=!1,m("error","The option `"+o+"` is not compatible with `dragAndDrop`; `"+o+"` desactivated."))}),S.scrollOverflow&&m("warn","The option `scrollOverflow` is not fully compatible with `dragAndDrop`; Scrolling sections/slides will not work when dragging")}function m(n,o){console&&console[n]&&console[n]("fullPage: "+o)}var b=this,M=n.fn.fullpage.getFullpageData(),S=M.options,A=M.internals,x="fullpage-wrapper",y="."+x,T="active",D="."+T,C="fp-section",G="."+C,H=G+D,P="fp-slide",F="."+P,q=F+D,B="fp-slides",E="."+B,k="fp-slidesContainer",R="."+k;b.isGrabbing=!1,b.isAnimating=!1;var I,L,O,z,Y,j,Q=0,V=null,X=null,_=0,J=0,K=.05,N=.7,U=0,W=0,Z=0,$=0,nn=0,on=0,tn=!1,en=!1,rn=0;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),b.init=function(n){return S.fitToSection=!1,p(),t(),o(),b},b.turnOffTouch=function(){var o=A.getMSPointer();n(y).off("touchstart "+o.down).off("touchmove "+o.move).on("touchstart "+o.down,c)};var an,sn,ln=0,un=0;b.getCurrentScroll=function(){if(!S.css3||!S.autoScrolling||S.scrollBar)return S.autoScrolling&&!S.scrollBar?parseInt(n(y).css("top")):-n(window).scrollTop();var o=n(y).css("transform");return o="undefined"==typeof o?n(y).css("-webkit-transform"):o,"undefined"!=typeof o?parseInt(o.split(",")[5]):void 0},b.getCurrentScrollSlides=function(o){var t=n(o.target).closest(G);L=t.length?t:L,"undefined"==typeof L&&(L=n(H));var e=L.find(E);if(e.length){var r=e.find(R);if(!S.css3)return-e.scrollLeft();var i=r.css("transform");if(i="undefined"==typeof i?n(y).css("-webkit-transform"):i,"undefined"!=typeof i)return"none"===i?0:parseInt(i.split(",")[4])}return 0},b.getDocumentHeight=function(){var o=0,t=n(G).length;return n(G).each(function(e){e!==t&&(o+=n(this).height())}),o},b.destroy=function(){var o=A.getMSPointer();n(y).off("touchstart "+o.down).off("touchmove "+o.move).off("touchend"),n(window).off("mousedown MouseDownHandler").off("mousemove MouseMoveHandler").off("mouseup")};var cn;b.isScrollingDown=function(){return!en&&cn?cn:cn="down"===V},b.c=A.c;var fn=b["common".charAt(0)];return"complete"===document.readyState&&fn("dragAndMove"),n(window).on("load",function(){fn("dragAndMove")}),b}}(jQuery);